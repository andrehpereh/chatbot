steps:
  # Build the container image (unchanged, assuming this works)
# Build the container image (unchanged, assuming this works)
#- name: 'gcr.io/cloud-builders/gcloud'
#  args: ['run', 'deploy', 'chattingbot', '--image', 'gcr.io/$PROJECT_ID/$_CONTAINER_IMAGE_RUNNING_APP:$TAG_NAME', '--region', '$LOCATION', '--platform', 'managed', '--allow-unauthenticated', '--port', '5000']

# Deploy the Cloud Function with corrections
- name: 'gcr.io/cloud-builders/gcloud'
  args: ['run', 'deploy', 'my-pipeline-trigger', '--image', 'gcr.io/$PROJECT_ID/$_CONTAINER_IMAGE_NAME_PIPELINE:$TAG_NAME', '--region', '$LOCATION', '--platform', 'managed', '--allow-unauthenticated', '--port', '5000', '--command', 'python', '--args', 'app.py']

- name: 'gcr.io/cloud-builders/gcloud'
  args: ['functions', 'deploy', 'trigger_pipeline', '--runtime', 'python39', '--trigger-topic', 'projects/$PROJECT_ID/topics/your-pipeline-trigger-topic', '--region', '$LOCATION'] 

